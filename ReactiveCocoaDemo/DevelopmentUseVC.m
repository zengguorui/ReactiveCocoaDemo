//
//  DevelopmentUseVC.m
//  ReactiveCocoaDemo
//
//  Created by 曾国锐 on 2017/9/1.
//  Copyright © 2017年 曾国锐. All rights reserved.
//

#import "DevelopmentUseVC.h"

@interface DevelopmentUseVC ()

@end

@implementation DevelopmentUseVC

- (void)viewDidLoad {
    [super viewDidLoad];
    
    UIView *redV = [[UIView alloc] initWithFrame:CGRectMake(100, 100, 100, 100)];
    redV.backgroundColor = [UIColor redColor];
    [self.view addSubview:redV];
    
    UIButton *button = [UIButton buttonWithType:UIButtonTypeCustom];
    [button setTitleColor:[UIColor blackColor] forState:UIControlStateNormal];
    [button setTitle:@"点击" forState:UIControlStateNormal];
    button.frame = CGRectMake(0, 0, 100, 50);
    [redV addSubview:button];
    [button addTarget:self action:@selector(btnClick:) forControlEvents:UIControlEventTouchUpInside];
    
    // 1.代替代理
    // 需求：自定义redView,监听红色view中按钮点击
    // 之前都是需要通过代理监听，给红色View添加一个代理属性，点击按钮的时候，通知代理做事情
    // rac_signalForSelector:把调用某个对象的方法的信息转换成信号，就要调用这个方法，就会发送信号。
    // 这里表示只要redV调用btnClick:,就会发出信号，订阅就好了。
    [[redV rac_signalForSelector:@selector(btnClick:)] subscribeNext:^(id x) {
        NSLog(@"点击红色按钮");
    }];
    

    // 2.KVO
    // 把监听redV的center属性改变转换成信号，只要值改变就会发送信号
    // observer:可以传入nil
    [[redV rac_valuesAndChangesForKeyPath:@"center" options:NSKeyValueObservingOptionNew observer:nil] subscribeNext:^(id x) {
        
        NSLog(@"%@",x);
        
    }];
    
    
    // Do any additional setup after loading the view.
}

- (void)btnClick:(UIButton *)button{

    NSLog(@"点击按钮");
}

- (void)didReceiveMemoryWarning {
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

/*
#pragma mark - Navigation

// In a storyboard-based application, you will often want to do a little preparation before navigation
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    // Get the new view controller using [segue destinationViewController].
    // Pass the selected object to the new view controller.
}
*/

@end
